<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/import.css">
    <title>Semaforo</title>
</head>
<body>
    <script>
    function random(min, max) {
    const n = Math.floor(Math.random() * (max - min + 1)) + min
    console.log(n)
    return n
}

    function delay(){
        
    button.innerHTML = "PREMI ORA!"
    circle1.classList.add("green")
    circle1.classList.remove("cerchio1")
    circle2.classList.add("green")
    circle2.classList.remove("cerchio2")
    circle3.classList.add("green")
    circle3.classList.remove("cerchio3")  
    circle4.classList.add("cerchio4")
    circle4.classList.remove("green")
    circle5.classList.add("cerchio5")
    circle5.classList.remove("green")     
    check = true
    now = Date.now()
        
    }

    function reset(){

    circle1.classList.add("cerchio1")
    circle1.classList.remove("green")
    circle2.classList.add("cerchio2")
    circle2.classList.remove("green")
    circle3.classList.add("cerchio3")
    circle3.classList.remove("green") 
    circle4.classList.add("cerchio4")
    circle4.classList.remove("green")
    circle5.classList.add("cerchio5")
    circle5.classList.remove("green")   
    check = false 
    button.disabled = false 
    button.innerHTML = "CLICCA PER GIOCARE"
        
    }

    let button = document.querySelector("#bottone")
    let circle1 = document.querySelector("#cerchio1") 
    let circle2 = document.querySelector("#cerchio2")
    let circle3 = document.querySelector("#cerchio3")
    let circle4 = document.querySelector("#cerchio4")
    let circle5 = document.querySelector("#cerchio5")
    let check = false
    let inner = document.querySelector("#inner-text")
    let now
    let reflex
    let bestScore = 1000000000
    let updteScore = document.querySelector("#bestscore")

    button.addEventListener("click", function () {
    if (check === false) {
        reset()
        let rnd = random(1000, 5000)
        inner.innerHTML = "Attendi il semaforo verde, stai attento!"
        setTimeout(delay, rnd)
        
    } else {
        reflex = (Date.now() - now)/1000
        console.log(reflex)
        inner.innerHTML = "Il tuo tempo di reazione Ã¨: " + reflex + "s"
        if(reflex<bestScore){
             bestScore  = reflex
            updteScore.innerHTML = "Tempo migliore: " + bestScore + "s"
        }else{
            updteScore.innerHTML = "Tempo migliore: " + bestScore + "s"
        }
        button.disabled = true
        setTimeout(reset, 5000)
    }
})
    </script>
    <div class="container">
       
        <div class="TITOLO">
            <h1 id="text">SEMAFORO PER I RIFLESSI</h1>
        </div>
       
        <div class="semaforo">
            <div id="cerchio1"></div>
            <div id="cerchio2"></div>
            <div id="cerchio3"></div>
            <div id="cerchio4"></div>
            <div id="cerchio5"></div>
        </div>

        <div class="bottone">
            <form action="">
                <input type="button" id="bottone" name="bottone" value="CLICCA PER GIOCARE">
            </form>
        </div>
    </div>
</body>
</html>